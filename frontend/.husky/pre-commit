#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run lint-staged (lint on staged files)
echo "ğŸ” Linting staged files..."
npx lint-staged || exit 1

# Run type check (on all files)
echo "ğŸ” Running type check..."
npm run check || {
  echo "âŒ Type check failed. Please fix type errors before committing."
  exit 1
}

# Run lint (on all files)
echo "ğŸ” Running lint check..."
npm run lint || {
  echo "âŒ Lint failed. Please fix linting errors before committing."
  exit 1
}

# Run tests (all tests to ensure nothing broke)
echo "ğŸ§ª Running tests..."
npm run test || {
  echo "âŒ Tests failed. Please fix failing tests before committing."
  exit 1
}

echo "âœ… All checks passed!"
